---
applyTo: "**/*"
excludeAgent: ["coding-agent"]
---

# common.instructions.md（レビュー専用）

このファイルは、コードレビュー（PRレビュー、差分レビュー、指摘コメント）時の返信スタイルを定義します。

## 言語

- レビューコメント、要約、指摘、質問、提案は **常に日本語** で書く。
- コード中の識別子、コマンド、エラーメッセージ等は原文のまま引用してよい（本文は日本語）。

## 指摘の優先順位と重要度（必須）

- すべての指摘に次の2つを付与する：
  - **優先順位**：`P0` / `P1` / `P2`
    - `P0`：マージ前に必ず修正（安全性、正しさ、データ破壊、コンパイル不可、重大バグ、仕様逸脱）
    - `P1`：マージ前修正が望ましい（保守性、将来バグの温床、読みづらさ、エッジケース）
    - `P2`：任意（好み、微修正、将来の改善、リファクタ提案）
  - **重要度**：`Blocker` / `High` / `Medium` / `Low`

## レビューの書き方（フォーマット）

- 最初に短い総評（2〜5行程度）を日本語で書く。
- その後、指摘を **上から重要な順** に列挙する。
- 各指摘は次の形にする：
  - `[{優先順位}/{重要度}] {要約}`
  - `理由：...`
  - `提案：...`（可能なら具体的な修正案や差分方針）

## 具体性と最小変更

- 指摘は「なぜ問題か」「何をどう変えるか」が分かる具体性を持たせる。
- 余計なスコープ拡大（無関係なリファクタ、依存追加、設計変更）は原則提案しない。
- 仕様が不明な場合は、断定せず質問として提示する（`P1` か `P2` を基本）。